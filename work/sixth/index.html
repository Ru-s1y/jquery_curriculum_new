<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <title>jQuery</title>
    <link rel="stylesheet" href="../../common/css/reset.css">
    <link rel="stylesheet" href="../../common/css/base.css">
    <link rel="stylesheet" href="./css/style.css">
  </head>
  <body>
    <div class="wrapper">
      <form class="register">
        <div class="input-wrapper">
          <input type="text" class="input" placeholder="Input Your Name.">
          <p class="rest-count">30</p>
        </div>
        <button class="register-btn">Register</button>
      </form>
    </div>
    <script src="../../common/js/jquery.js"></script>
    <script>
      // 今回やるのは文字数チェッカーです。
      // .input に文字を入力し、文字を入力した段階でその文字数に応じて .rest-count の値が減っていき、最大文字数である30文字以上入力すると .rest-count に .red クラスが追加されて文字色が赤くなり、30文字以内になると、.red クラスが外れ、文字色が元に戻る。（ちなみに改行は文字数に含まない。）
      // .keyup() 文字入力後に発火されるイベントです。
      // .replace(/\s+/g,'').length 改行を含まない文字数を取得します。
      // .val() input要素のvalueを取得します。
      // $(function() {
      //   var $input = $('.input');
      //   var $resetCount = $('.rest-count');
      //   var MAX_LETTERS = 30;

      //   $input.on('keyup', function() {
      //     var value = $(this).val();
      //     var strLength = value.replace(/\s+/g, '').length;
      //     if (MAX_LETTERS < strLength) {
      //       $restCount.addClass('red');
      //     } else {
      //       $restCount.removeClass('red');
      //     }
      //     $resetCount.text(MAX_LETTERS - strLength);
      //   });
      // });

      function Input() {
        this.$input = $('.input');
        this.$restCount = $('.rest-count');
        this.MAX_LETTERS = 30;
        this.bind();
      }

      // 入力時の処理
      Input.prototype.bind = function() {
        this.$input.on('keyup', this.wordCount.bind(this));
      }

      // 文字数の割り出し処理
      Input.prototype.wordCount = function(e) {
        this.value = $(e.target).val();
        console.log(this.value);
        console.log(this.value.length);
      }

      // 判定と処理
      Input.prototype.checkLength = function() {
        if (this.MAX_LETTERS < strLength) {
          $restCount.addClass('red');
        } else {
          $restCount.removeClass('red');
        }
        this.changeCount(strLength);
      }

      // カウントの変更処理
      Input.prototype.changeCount = function(strLength) {
        this.$restCount.text(this.MAX_LETTERS - this.strLength);
      }

      $(function() {
        var input = new Input();
      });

    </script>
  </body>
</html>

